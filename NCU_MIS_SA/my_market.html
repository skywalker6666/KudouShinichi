<!Doctype html>
<html>

<head>
    <meta charset="utf-8">

    <title>my_market</title>

    <!-- Bootstrap core CSS -->


    <style>
        .bd-placeholder-img {
            font-size: 1.125rem;
            text-anchor: middle;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        @media (min-width: 768px) {
            .bd-placeholder-img-lg {
                font-size: 3.5rem;
            }
        }
    </style>
    <!-- Custom styles for this template -->
    <link rel="stylesheet" href="statics/css/navbar.css">
    <link rel="stylesheet" href="statics/css/themebox.css">
    <link rel="stylesheet" href="statics/css/card.css">
    <link rel="stylesheet" href="statics/css/product.css">

    <script src="statics/js/jquery-3.4.1.min.js"></script>
</head>

<body bgcolor="#BCE2FF">

    <ul class="navbar">
        <li class="navbar"><a href="index.html"><img src="statics/img/navbar/icon.png" style="float: left"
                    height="100px" width="100px"></img></a></li>
        <li class="navbar"><a class="navbarItem" href="index.html">Home</a></li>
        <li class="navbar"><a class="navbarItem" href="productIndex.html">商品總覽</a></li>
        <li class="navbar"><a class="navbarItem" href="order_tracking.html">訂單追蹤</a></li>
        <li class="navbar"><a class="navbarItem" href="shoppingcart.html">購物車</a></li>
        <li style="float: right"><a class="navbarItemSide" href="login_selected.html">會員註冊/登入</a></li>
    </ul>

    <div class="frame">

        <div class="generalbox">
            <font face="DFKai-sb" size="6" color="blue"> 我的賣場</font>
            <div><button id="add_product" name="add_product" type="button" class="productcard"  onclick="location.href='add_product.html'">新增商品</button><Br><Br>
            </div>

            <div class="album py-5 bg-light">
                <div class="container">
                    <div id="product_panel" class="row">
                    </div>
                </div>
            </div>
        </div>

    </div>



    <script>



        /**
         * 取得所有商品
         * @call：addProduct()：畫出一筆商品
         * @call：setButtonFunction()：按鈕設置
         * @call：checkIfExistInCart()：
         */
        function getAllProduct() {
            $.ajax({
                type: "GET",
                url: "api/product.do",
                crossDomain: true,
                cache: false,
                dataType: 'json',
                timeout: 5000,
                success: function (response) {
                    if (response.status == 200) {
                        var product_panel = '';

                        $.each(response.response.data, function () {
                            product_panel += addProduct(this);
                        })

                        $("#product_panel").append(product_panel);

                    }
                },
                error: function () {
                    alert("無法連線到伺服器！");
                }
            });
        }

        getAllProduct();

        /**
         * 畫出一筆商品
         */
        function addProduct(data) {
            let inner_html = '';
            inner_html += '<div class="col-md-4" style="float:left;">';
            inner_html += '<div class="card-header">';
            inner_html += '<h4 class="font-weight-normal text-center text-truncate">' + data.name + '</h4>';
            inner_html += '</div>';
            inner_html += '<div class="card mb-4 shadow-sm">';
            inner_html += '<img src="statics/img/product/' + data.image + '" width="100%">';
            inner_html += '<div class="card-body">';
            inner_html += '<h1 class="card-title pricing-card-title">$' + data.price + ' <small class="text-muted">/ USD</small></h1>';
            inner_html += '<p class="card-text">' + data.describe + '</p>';
            inner_html += '<div class="d-flex justify-content-between align-items-center">';
            inner_html += '<div class="btn-group">';
            inner_html += '<button id="add_cart_' + data.id + '" name="add_cart" type="button" class="productcard">修改商品</button>';
            inner_html += '<button id="add_cart_' + data.id + '" name="delete_cart" type="button" class="productcard">刪除商品</button>';
            inner_html += '</div><small class="text-muted">id:' + data.id + '</small>';
            inner_html += '</div></div></div></div>';

            return inner_html;
        }


    </script>

    <footer class="text-muted">
        <div class="container">
            <p class="float-right">
                <a href="#">Back to top</a>
            </p>
        </div>
    </footer>


</body>

</html>